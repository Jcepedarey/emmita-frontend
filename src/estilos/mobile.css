/* ‚ö†Ô∏è Importante: aqu√≠ NO ponemos @tailwind base/components/utilities para evitar duplicados.
   Este archivo se procesa por Tailwind, as√≠ que puedes usar @apply sin problema. */

/* Solo m√≥viles y tablets */
@media (max-width: 768px) {
  /* üîπ Base tipogr√°fica, fondo y SIN scroll horizontal (evita "zoom" y corrimientos) */
  html, body {
    background: var(--md-bg);
    color: var(--md-text);
    font-size: 15px;
    line-height: 1.45;
    -webkit-tap-highlight-color: transparent;
    overflow-x: hidden; /* clave para que el navegador no "aleje" la vista */
  }

  /* Espaciado lateral c√≥modo en vistas de p√°gina */
  .container, .contenedor, .page { @apply px-3; }

  /* üîπ Escala tipogr√°fica compacta */
  h1 { font-size: clamp(18px, 5vw, 22px); line-height: 1.2; }
  h2 { font-size: clamp(16px, 4.5vw, 20px); line-height: 1.25; }
  h3 { font-size: clamp(14px, 4vw, 18px); line-height: 1.3; }
  p, li { line-height: 1.4; }

  /* üîπ Formularios m√°s compactos y legibles (incluye Login) */
  input, select, textarea { @apply text-sm py-2; }
  label { @apply text-xs text-gray-600; }
  .form-row { @apply grid grid-cols-1 gap-3; } /* fuerza 1 columna en m√≥vil */
  /* Login / auth centrado y con ancho controlado */
  .auth { max-width: 420px; margin: 0 auto; padding: 0 16px; }

  /* üîπ Botones con target t√°ctil adecuado */
  button { @apply text-sm px-3 py-2 rounded-lg; min-height: 40px; }

  /* üîπ Tarjetas/controles (look Material compacto) */
  .card, .tarjeta {
    @apply bg-white rounded-lg border border-gray-200;
    padding: 10px;
    gap: 6px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.05);
  }

  /* üîπ Barra superior (app bar) sticky con blur sutil */
  .toolbar, .appbar, header.sticky, .encabezado {
    position: sticky;
    top: 0;
    z-index: 40;
    background: var(--md-surface);
    border-bottom: 1px solid var(--md-border);
    backdrop-filter: saturate(180%) blur(8px);
  }

  /* üîπ Ocultar la barra flotante de navegaci√≥n (flechas + home) en m√≥vil */
  .nav-floating { display: none !important; }

  /* üîπ Quitar la barra inferior que no te gust√≥ */
  .menu-inferior { display: none !important; }

  /* üîπ FAB de IA fijo: pegado al borde, respetando √°reas seguras y SIN empujar el layout */
  .boton-ia {
    position: fixed;
    right: max(12px, env(safe-area-inset-right));
    bottom: max(12px, calc(env(safe-area-inset-bottom) + 12px));
    background: var(--md-secondary); /* morado */
    color: #ffffff;
    border: 0;
    border-radius: 9999px;
    padding: 8px 12px;
    font-size: 13px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.25);
    z-index: 60;
    /* Evita que "afecte" el ancho del documento y cause overflow/zoom */
    contain: layout paint;
    isolation: isolate;
    max-width: calc(100vw - 24px);
    touch-action: manipulation;
  }

  /* üîπ Ocultar sidebar y ampliar contenido en m√≥vil */
  .sidebar, .aside, .panel-lateral { display: none !important; }
  main, .contenido, .main { width: 100% !important; }

  /* üîπ Grids a 1 columna (si usas utilidades o clases personalizadas) */
  .grid.cols-2, .grid.cols-3, .grid.cols-4,
  .grid-cols-2, .grid-cols-3, .grid-cols-4 {
    grid-template-columns: 1fr !important;
  }

  /* üîπ NUEVO: Men√∫ de inicio compacto con c√≠rculos - 4 columnas en m√≥vil */
  .menu-grid-compacto {
    display: grid !important;
    grid-template-columns: repeat(4, 1fr) !important;
    gap: 10px !important;
    padding: 0 4px !important;
    max-width: 100% !important;
  }

  .boton-modulo-compacto {
    padding: 4px;
  }

  .boton-modulo-compacto .icono-circulo {
    width: 46px !important;
    height: 46px !important;
  }

  .boton-modulo-compacto .icono-circulo img {
    width: 28px !important;
    height: 28px !important;
  }

  .boton-modulo-compacto p {
    font-size: 10px !important;
    max-width: 60px !important;
  }

  /* üîπ Cuadr√≠cula de inicio ANTIGUA (por compatibilidad) */
  .menu-grid {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 10px;
    padding: 0 4px;
  }
  .menu-grid .boton-modulo {
    padding: 8px;
    border-radius: 10px;
    border: 1px solid var(--md-border);
    background: #fff;
    box-shadow: 0 1px 2px rgba(0,0,0,.05);
    text-align: center;
  }
  .menu-grid .boton-modulo img { width: 40px; height: 40px; }
  .menu-grid .boton-modulo p { font-size: 12px; line-height: 1.15; margin-top: 4px; }

  /* üîπ Tablas desplazables horizontalmente (sin romper layout) */
  table {
    display: block;
    width: 100%;
    overflow-x: auto;
    white-space: nowrap;
    border-spacing: 0;
  }
  th, td { padding: 6px 10px; }

  /* üîπ Modal pantalla completa en m√≥vil */
  .modal, .dialog {
    width: 100vw !important;
    max-width: 100vw !important;
    height: 100dvh !important;
    max-height: 100dvh !important;
    margin: 0 !important;
    border-radius: 0 !important;
  }

  /* üîπ Helpers */
  .touch-target { min-height: 44px; min-width: 44px; } /* accesibilidad */
  .compact-y > * + * { margin-top: 6px; }
  .desktop-only { display: none !important; }
  .mobile-only { display: initial !important; }

  /* üîπ Cuadros de pedidos en Inicio - m√°s compactos y mejor aprovechados */
  .grid.grid-cols-1.md\\:grid-cols-2 {
    gap: 8px !important;
  }

  /* Reducir altura de scroll interno en pedidos */
  .h-36 {
    height: 140px !important;
  }
}

/* üåô Modo oscuro (solo m√≥vil) */
@media (max-width: 768px) and (prefers-color-scheme: dark) {
  html, body { background: #0b1220; color: #e5e7eb; }
  .card, .tarjeta { background: #0f172a; border-color: #1f2937; box-shadow: none; }
  .toolbar, .appbar, header.sticky, .encabezado {
    background: rgba(15, 23, 42, 0.85);
    border-bottom-color: #1f2937;
    backdrop-filter: saturate(180%) blur(10px);
  }
  /* La barra inferior est√° oculta en m√≥vil, no se estiliza. */
  .boton-ia { background: #7c3aed; color: #fff; }
  input, select, textarea {
    @apply bg-slate-900 text-slate-100 border-slate-700 focus:ring-blue-500;
  }
  button {
    @apply bg-slate-800 text-slate-100 border-slate-700 hover:bg-slate-700;
  }

  /* Modo oscuro para c√≠rculos del men√∫ */
  .boton-modulo-compacto .icono-circulo {
    background-color: #1f2937 !important;
    border-color: #374151 !important;
  }

  .boton-modulo-compacto p {
    color: #e5e7eb !important;
  }
}

/* üñ•Ô∏è Estilos espec√≠ficos para PC/Desktop */
@media (min-width: 769px) {
  /* Men√∫ compacto en PC - 6 columnas para aprovechar espacio */
  .menu-grid-compacto {
    grid-template-columns: repeat(6, 1fr) !important;
    gap: 16px !important;
    max-width: 600px !important;
  }

  .boton-modulo-compacto .icono-circulo {
    width: 56px !important;
    height: 56px !important;
  }

  .boton-modulo-compacto .icono-circulo img {
    width: 34px !important;
    height: 34px !important;
  }

  .boton-modulo-compacto p {
    font-size: 11px !important;
    max-width: 75px !important;
  }
}